---
import { getCollection, render } from "astro:content";
import Layout from "~/layouts/Layout.astro";

const { slug } = Astro.params;

if (!slug) {
    return Astro.redirect("/docs");
}

const allDocs = await getCollection("docs");
const doc = allDocs.find((d) => d.id === slug);

if (!doc) {
    return Astro.redirect("/docs");
}

const { Content } = await render(doc);
---

<Layout
    title={`${doc.data.title} - @hectoday/http`}
    description={doc.data.description}
>
    <nav>
        <a href="/docs">‚Üê Back to docs</a>
    </nav>

    <article class="prose">
        <h1>{doc.data.title}</h1>
        <Content />
    </article>
</Layout>

<style>
    nav {
        margin-bottom: 2rem;
    }
</style>
