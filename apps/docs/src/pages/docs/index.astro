---
import { getCollection } from "astro:content";
import Layout from "~/layouts/Layout.astro";

const docs = await getCollection("docs");
const sortedDocs = docs
    .filter((doc) => !doc.data.draft)
    .sort((a, b) => (a.data.order || 0) - (b.data.order || 0));
---

<Layout title="Documentation - @hectoday/http">
    <nav>
        <a href="/">‚Üê Home</a>
    </nav>

    <h1>Documentation</h1>

    <ul>
        {
            sortedDocs.map((doc) => (
                <li>
                    <a href={`/docs/${doc.id}`}>{doc.data.title}</a>
                    {doc.data.description && <p>{doc.data.description}</p>}
                </li>
            ))
        }
    </ul>
</Layout>

<style>
    nav {
        margin-bottom: 2rem;
    }

    ul {
        list-style: none;
        padding: 0;
    }

    li {
        margin-bottom: 1.5rem;
    }

    li p {
        margin: 0.25rem 0 0 0;
        color: #666;
    }
</style>
